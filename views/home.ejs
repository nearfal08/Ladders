<!-- views/home.ejs -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Node.js Blog</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <style>
        body {
            padding-top: 20px;
            padding-bottom: 20px;
        }
        .jumbotron {
            margin-top: 10px;
        }
    </style>
</head>

<body>
    <div class="container">
        <%- include( 'partials/navbar') %>
            <div class="jumbotron">
                <h1>League of Legends Ladder</h1>
                <p class="success">Check out our articles below!</p>
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <ul class="standings list-group">
                    </ul>
                </div>
            </div>
            <%- include( 'partials/footer') %>
    </div>
    <script src="/jquery/dist/jquery.js"></script>
    <script src="/socket.io/socket.io.js"></script>
</body>
<script>
    // Connect through socket to server side
    var socket = io.connect('http://localhost:4200');
    // On connecting to the socket, emit "join" to server with a string as a param.
    socket.on('connect', function(data) {
        socket.emit('get_challenger', '');
    });
    socket.on('challenger_players', function(players) {
        //$('.user_name').html(data); 
        //var players = jQuery.parseJSON(data);
        var d = new Date(); // for now
        d.getHours(); // => 9
        d.getMinutes(); // =>  30
        d.getSeconds(); // => 51
        $('.success').html('Updated ladder at ' + d.getHours() + ':' + d.getMinutes() + ':' + d.getSeconds());
        var counter = 1;
        $.each(players, function(index, value) {
            $('.standings').append('<li class="list-group-item">' + counter + '. ' + value.playerOrTeamName + ' ' + value.leaguePoints + '</li>');
            counter++;
        });
    });
</script>

</html>